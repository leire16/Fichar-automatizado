name: Ejecutar Fichaje

on:
  schedule:
    # Esto ejecutará el flujo de trabajo a las 13:15 hora local en España (CEST, UTC+2)
    - cron: '30 5 * * *'  # 07:43 CEST (en horario de verano, UTC+2) / 06:43 UTC
  workflow_dispatch:  # Permite ejecutar el flujo de trabajo manualmente desde GitHub UI

jobs:
  run_fichaje:
    runs-on: windows-latest  # Usamos un contenedor de Windows en GitHub Actions
    steps:
      - name: Check out the repository
        uses: actions/checkout@v2
        
      - name: Configurar Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.x'
        
      - name: Instalar dependencias
        run: |
              python -m pip install --upgrade pip
              pip install selenium webdriver-manager

      - name: Run fichar.py
        env:
          USERNAME: ${{ secrets.USERNAME }}
          PASSWORD: ${{ secrets.PASSWORD }}
        run: python fichar.py
